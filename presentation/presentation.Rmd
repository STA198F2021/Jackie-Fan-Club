---
title: "Investigating the Effect of Sex, Race, and Gender Identities on Health Outcomes"
subtitle: "Presentation subtitle (if any)"
author: "Jackie Fan Club <br> Ashley Bae, Gi Chun, Jay Nolt"
institute: "Duke University"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    lib_dir: libs
    nature:
      ratio: "16:9"
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---
class: inverse, middle, center
```{r load-packages, include = FALSE}
# Add any additional packages you need to this chunk
# Remove any packages from this list that you're not using
library(tidyverse)
library(tidymodels)
library(palmerpenguins)
library(knitr)
library(xaringanthemer)
library(readxl)
library(dbplyr)
library(ggplot2)
```

```{r setup, include = FALSE}
# For better figure resolution
knitr::opts_chunk$set(
  fig.retina = 3, 
  dpi = 300, 
  fig.width = 6, 
  fig.asp = 0.618, 
  out.width = "70%"
  )
```

```{r load-data, include = FALSE}
# Load your data here 
load(file = "~/sta198/Jackie-Fan-Club/data/ICPSR_34363/DS0001/34363-0001-Data.rda")
#rename file
data <- da34363.0001
```

```{r style-slides, echo = FALSE}
style_xaringan(
  title_slide_background_image = "img/watercolour_sys02_img34_teacup-ocean.jpg"
)
```

```{r select-data, echo = FALSE}
data_filtered <- data %>%
  select(Q15B,
         Q15C,
         Q17A,
         Q17B,
         Q18A1:Q18A5,
         Q18C,
         Q18G,
         Q19A1:Q19A7,
         Q22A,
         Q22B,
         Q25)
# remove descriptions and other attributes
data_filtered2 <- lapply(data, function(x) {attributes(x) <- NULL; x}) %>% 
  as.data.frame() %>%
  select(Q15B,
         Q15C,
         Q17A,
         Q17B,
         Q18A1:Q18A5,
         Q18C,
         Q18G,
         Q19A1:Q19A7,
         Q22A,
         Q22B,
         Q25)
```

```{r renameQuestions, echo = FALSE}
data_big <- data_filtered %>%
    select(Q17A,
         Q17B,
         Q18A1:Q18A5,
         Q18C,
         Q18G,
         Q19A1:Q19A7,
         Q22A,
         Q22B,
         Q25) %>%
  rename(healthInsureAcc = Q17A) %>%
  rename(healthProvideAcc = Q17B) %>%
  rename(male = Q18A1) %>%
  rename(female = Q18A2) %>% 
  rename(m2f = Q18A3) %>%
  rename(f2m = Q18A4) %>%
  rename(genderOther = Q18A5) %>%
  rename(sexuality = Q18C) %>%
  mutate(age = 2021 - Q18G) %>%
  rename(black = Q19A1) %>%
  rename(hispanic = Q19A2) %>% 
  rename(asian = Q19A3) %>%
  rename(native = Q19A4) %>%
  rename(white = Q19A5) %>%
  rename(multi = Q19A6) %>%
  rename(raceOther = Q19A7) %>%
  rename(edu = Q22A) %>%
  rename(income = Q22B) %>%
  rename(assessHealth = Q25)
```

```{r creatingGender, echo = FALSE}
data <- data_big %>%
  mutate(male = case_when(
  male == "(1) Yes" ~ "male",
  is.na(male) ~ "",
  TRUE ~ ""), 
  female = case_when(
  female == "(1) Yes" ~ "female",
  is.na(female) ~ "",
  TRUE ~ ""), 
  m2f = case_when(
  m2f == "(1) Yes" ~ "m2f",
  is.na(m2f) ~ "",
  TRUE ~ ""), 
  f2m = case_when(
  f2m == "(1) Yes" ~ "f2m",
  is.na(f2m) ~ "",
  TRUE ~ ""), 
  genderOther = case_when(
  genderOther == "(1) Yes" ~ "Other",
  is.na(genderOther) ~ "",
  TRUE ~ ""), 
  gender = ""
) 
data$gender <- paste(data$male, data$female)
data$gender <- paste(data$gender, data$m2f)
data$gender <- paste(data$gender, data$f2m)
data$gender <- paste(data$gender, data$genderOther)
data$gender <- trimws(data$gender)
data <- data %>%
mutate(gender = case_when(
  gender == "male" ~ "Male",
  gender == "female" ~ "Female",
  gender == "m2f" ~ "Transgender: Male to Female",
  gender == "f2m" ~ "Transgender: Female to Male",
  TRUE ~ "Other")
)
```

```{r creatingRace, echo = FALSE}
data <- data %>%
  mutate(black = case_when(
  black == "(1) Yes" ~ "black",
  is.na(male) ~ "",
  TRUE ~ ""), 
  hispanic = case_when(
  hispanic == "(1) Yes" ~ "hispanic",
  is.na(hispanic) ~ "",
  TRUE ~ ""), 
  asian = case_when(
  asian == "(1) Yes" ~ "asian",
  is.na(asian) ~ "",
  TRUE ~ ""), 
  native = case_when(
  native == "(1) Yes" ~ "native",
  is.na(native) ~ "",
  TRUE ~ ""), 
  white = case_when(
  white == "(1) Yes" ~ "white",
  is.na(white) ~ "",
  TRUE ~ ""), 
  multi = case_when(
  multi == "(1) Yes" ~ "multi",
  is.na(multi) ~ "",
  TRUE ~ ""), 
  raceOther = case_when(
  raceOther == "(1) Yes" ~ "Other",
  is.na(raceOther) ~ "",
  TRUE ~ ""), 
  race = ""
) 
data$race <- paste(data$black, data$hispanic)
data$race <- paste(data$race, data$asian)
data$race <- paste(data$race, data$native)
data$race <- paste(data$race, data$white)
data$race <- paste(data$race, data$multi)
data$race <- paste(data$race, data$raceOther)
data$race <- trimws(data$race)
data <- data %>%
mutate(race = case_when(
  race == "black" ~ "Black",
  race == "hispanic" ~ "Hispanic",
  race == "asian" ~ "Asian",
  race == "native" ~ "Native",
  race == "white" ~ "White",
  race == "multi" ~ "Multiracial",
  race == "other" ~ "Other",
  race == "" ~ "Other",
  TRUE ~ "Multiracial")
)
```

# Using xaringan

---

<<<<<<< HEAD
## Background

We chose this topic because we want to highlight interesting trends in intersectional inequality between historically marginalized identities within race, sexuality, and gender. We are motivated to ask our question from backgrounds of interest in health, racial justice, and wanting to examine US-based data. 

---

## Data

Our project uses data collected by the Social Justice Sexuality Project (SJS) through the University of Michiganâ€™s Resource Center for Minority Data

--

- surveyed over 5,000 participants

- from January of 2010 to December of 2010

- respondents were Black, Latina/o, Asian and Pacific Islander, and multiracial lesbian, gay, bisexual, and transgender (LGBT) people in 50 US states and Puerto Rico

- survey given via mail questionnaire, on-site questionnaire, and web-based survey in Spanish and English depending on the respondent. 

--

Data Citation: Battle, Juan, Pastrana, Antonio Jay, and Daniels, Jessie. Social Justice Sexuality Project: 2010 National Survey, including Puerto Rico. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2013-08-09. https://doi.org/10.3886/ICPSR34363.v1

---

## Preliminary Data Visualizations

.pull-left[
We included some data visualizations to demonstrate the simplifications we made to efficiently test our data. This is a visualization of the distribution of gender identity responses. When we conducted significant tests on gender we sorted respondents by cisgender and transgender to identify how marginalized groups were affected in the healthcare process. 
]
.pull-right[
```{r gender-barplot, warning = FALSE, out.width = "100%", echo = FALSE} 
data %>%
ggplot(aes(x = gender)) +
  geom_bar(fill = "light blue") +
  labs (x = "Gender",
        y = "Frequency",
        title = "Distribution of Respondant Gender") +
  theme(axis.text.x = element_text(angle = 45,
                                   hjust = 1))
```
]

---

## Preliminary Data Visualizations

.pull-left[
```{r health-insurance-gender, warning = FALSE, out.width = "100%", echo = FALSE}
data %>%
  ggplot(aes(x = gender,
          fill = healthInsureAcc)) +
  geom_bar(position = "fill") +
  labs (x = "Gender",
        y = "Frequency",
        fill = "Healthcare Insurance Access",
        title = "Relationship of Gender and Healthcare Insurance Access") +
  theme(axis.text.x = element_text(angle = 45,
                                   hjust = 1))
```
]
.pull-right[
After we looked at the distribution of data and made decisions about which factors we wanted to study further, we then began to match up explainatory variables with response variables. In this case, we were observing how gender identity affected healthcare insurance access.

The visualizations show that a greater percentage of transgender individuals answered "no" than cisgender individuals. The greatest percentage of "no" responses came from the group of self-identified female to male transgender individuals. Also, when comparing the gender groups, note that there are more missing values for transgendered individuals than cisgendered respondents, which may provide more insight to the disparity. It appears tentatively that one's gender identity may have a relationship to access to healthcare. 
]

---

## Research Question

Central research question:
- How do sexuality, race, and gender affect healthcare access?

--

We followed up by asking:

- Are marginalized groups disadvantaged in their health outcomes? 

- How much more significant are the disparities at intersections of more than one marginalized identity? 

---

# Data Analysis


---

# Findings



## The Study
=======
## xaringan
>>>>>>> 73fb5ee4407795b625c339c7b0aab89544c33cd3

- The presentation is created using the `xaringan` package

- Use `---` to separate slides and `--` for incremental builds

--

- Like this

---

## Layouts

You can use plain text

- or bullet points

.pull-left[
or text in two columns $^*$
]
.pull-right[
- like
- this
]

.footnote[
[*] And add footnotes
]

---

## Code

```{r boring-regression}
# a boring regression
model <- lm(dist ~ speed, data = cars)
tidy(model)
glance(model)
```

---

## Plots

```{r recode-species, echo = FALSE}
# In this chunk I'm doing a bunch of analysis that I don't want to present 
# in my slides. But I need the resulting data frame for a plot I want to present.
penguins_modified <- penguins %>%
  mutate(species = fct_other(species, keep = "Adelie"))
```

```{r plot-penguins, echo = FALSE, warning = FALSE, fig.alt = "Body mass vs. flipper lenght of Palmer Penguins for species Adelie and all the others combined together. There is a relatively strong, positive relationship between the two variables. The Adelie penguins are clustered together but they don't exhibit a different trend than the rest of the penguins."}
# Code hidden with echo = FALSE
# Uses modified penguins dataset from previous chunk
# Play around with height and width until you're happy with the look
ggplot(penguins_modified, aes(x = flipper_length_mm, y = body_mass_g, color = species)) +
  geom_point() + 
  theme_minimal()
```

---

## Plot and text

.pull-left[
- Some text
- goes here
]
.pull-right[
```{r warning=FALSE, out.width="100%", fig.width=4, echo=FALSE}
# see how I changed out.width and fig.width from defaults
# to make the figure bigger
ggplot(penguins, aes(x = bill_length_mm, y = species, color = species)) +
  geom_boxplot() +
  theme_minimal()
```
]

---

class: inverse, middle, center

# A new section...

---

## Tables

If you want to generate a table, make sure it is in the HTML format (instead of Markdown or other formats), e.g.,

```{r penguins-table, echo = FALSE}
kable(head(penguins), format = "html")
```

---

## Images

```{r castle, echo = FALSE, out.width = "40%", fig.align = "center", fig.cap = "Image credit: Danielle Navarro, Percolate."}
include_graphics("img/watercolour_sys02_img32_percolate.jpg")
```

Or you can also include a full page image. See next slide.

---

background-image: url(img/watercolour_sys02_img32_percolate.jpg)

---

## Math Expressions

You can write LaTeX math expressions inside a pair of dollar signs, e.g. &#36;\alpha+\beta$ renders $\alpha+\beta$. You can use the display style with double dollar signs:

```
$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$
```

$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$

Limitations:

1. The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

1. There should not be spaces after the opening `$` or before the closing `$`.

1. Math does not work on the title slide (see [#61](https://github.com/yihui/xaringan/issues/61) for a workaround).

---

class: inverse, middle, center

# Wrap up

---

## Feeling adventurous?

- Want to find out more about `xaringan`? See https://slides.yihui.name/xaringan/#1.

- You are welcomed to use the default styling of the slides. In fact, that's what I expect the majority of you will do. You will differentiate yourself with the content of your presentation.

- But some of you might want to play around with slide styling. The 
`xaringanthemer` provides some solutions for this that: https://pkg.garrickadenbuie.com/xaringanthemer.

- And if you want more bells and whistles, there is also `xaringanExtra`: https://pkg.garrickadenbuie.com/xaringanExtra.
